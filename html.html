<!DOCTYPE html>
<html lanrg="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIAKAD KPK</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="row">
        <div class="col-10 mx-auto mt-5 rounded-4 card">
            <h1 class="align-self-center card-title my-4">
                Personal IP Calculator
            </h1>
            <form action="#" onsubmit="outData();" class="d-flex flex-column">

                <div class="row align-items-center mt-3">
                    <div class="col-2">
                        <label for="inputMataKuliah" class="col-form-label">Mata Kuliah</label>
                    </div>
                    <div class="col">
                        <input type="text" id="inputMataKuliah" class="form-control" placeholder="Pemrograman Web">
                    </div>
                </div>
                <div class="row align-items-center mt-3">
                    <div class="col-2">
                        <label for="inputJumlahSKS" class="col-form-label">Jumlah SKS</label>
                    </div>
                    <div class="col">
                        <input type="number" id="inputJumlahSKS" class="form-control" placeholder="4">
                    </div>
                </div>
                <div class="row align-items-center mt-3">
                    <div class="col-2">
                        <label for="inputNilai" class="col-form-label">Nilai</label>
                    </div>
                    <div class="col">
                        <input type="number" min="0" max="4" id="inputNilai" class="form-control" placeholder="4">
                    </div>
                </div>
                <button type="submit" class="btn btn-outline-success mt-5 align-self-center">SUBMIT</button>    
            </form>
            <table border="2" class="table table-bordered  mt-3" id="outputTable">
                <tr class="table-dark">
                    <td>No.</td>
                    <td>Nama Mata Kuliah</td>
                    <td>Jumlah SKS</td>
                    <td>Nilai Bobot</td>
                    <td>Nilai Huruf</td>
                </tr>
            </table>
            <div class="row my-4 card bg-success w-25 mx-auto rounded-3">
                <div class="mx-auto p-3 ip d-flex justify-content-evenly">
                    <div>IP : </div> 
                    <span id="hasilIP"></span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    let sksArr = [];
    let nilaiArr = [];
    
    // fungsi konversi nilai skala 4 ke huruf
    const konversiNilai = (nilai) => {
        if (nilai < 0 || nilai > 4) return "Nilai tidak valid";
        else if (nilai < 1) return "E";
        else if (nilai < 2) return "D";
        else if (nilai < 3) return "C";
        else if (nilai < 4) return "B";
        else return "A";
    }

    const hitungIP = () => {
        const sksTotal = sksArr.reduce((total, sks) => total + sks, 0);
        const nilaiTotal = sksArr.reduce((total, sks, i) => total + sks * nilaiArr[i], 0);
        return (nilaiTotal / sksTotal).toFixed(2);
    };

    const outData = () => {
        const matkul = document.getElementById("inputMataKuliah").value;
        const sks = parseInt(document.getElementById("inputJumlahSKS").value);
        const nilai = parseFloat(document.getElementById("inputNilai").value);
  
        const nilaiHuruf = konversiNilai(nilai);
        const table = document.getElementById("outputTable");
        const row = table.insertRow(-1);
        row.insertCell(0).textContent = table.rows.length - 1;
        row.insertCell(1).textContent = matkul;
        row.insertCell(2).textContent = sks;
        row.insertCell(3).textContent = nilai;
        row.insertCell(4).textContent = nilaiHuruf;

        sksArr.push(sks);
        nilaiArr.push(nilai);

        document.getElementById("hasilIP").textContent = hitungIP();
    };
</script>